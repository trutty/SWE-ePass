extends ../../layout

block content
	p= message

	h1= title

	form.k-content(action='/exam/update', method='post')
		table
			tr
				th
					label(for='name')
						| Name:
				td
					input#name(class='k-textbox', type='text', name='name', disabled, value= exam.name)

			tr
				th
					label(for='user')
						| Tutor:
				td
					input#tutor.k-textbox(type='text', name='tutor', disabled, value= exam.user.name)
					
			tr
				th
					label(for='assessor')
						| Assessor:
				td
					each item in exam.assessor
						input.k-textbox(type='text', name='assessor[]', disabled, value= item.name)

			tr
				th
					label(for='course')
						| Course:
				td
					select.k-header(name='student')
						each item in exam.course
							option #{item.name}

			tr
				th
					label(for='lecture')
						| Lecture:
				td
					input#lecture(class='k-textbox', type='text', name='lecture', required='true', disabled, value= exam.lecture)

			tr
				th
					label(for='date')
						| Date: 
				td
					input#date(type='text', name='date', disabled, value= exam.date)

			tr
				th
					label(for='duration')
						| Duration in minutes: 
				td
					input#duration(class='k-textbox', type='number', name='duration', min='0', disabled, value= exam.duration)

			tr
				th
					label(for='maxPoints')
						| Maximum Points: 
				td
					input#maxPoints(class='k-textbox', type='number', name='maxPoints', min='0', disabled, value= exam.maxPoints)

			tr
				th
					label(for='criteria')
						| Criteria:
				td	
					ul.criteria
						each crit, i in exam.criteria
							if crit != null
								li
									input.criteriaName.k-textbox(type='text', name='criteria[#{i}][name]', required='true', placeholder='Name', disabled, value= crit.name)
									input.criteriaDesc.k-textbox(type='text', name='criteria[#{i}][description]', placeholder='Description', disabled, value= crit.description)
									input.criteriaScore.k-textbox(type='number', min='0', name='criteria[#{i}][score]', required='true', placeholder='Score', disabled, value= crit.score)
									input.assessCriteria.k-button(type='number', min='0', value='')
									ul.subcriteria
										each subcrit, n in crit.subcriteria
											if subcrit != null
												li.subcriteria
													input.k-textbox.subcriteriaName(type='text', required='true', placeholder='Name', name='criteria[#{i}][subcriteria][#{n}][name]', disabled, value= subcrit.name)
													input.k-textbox.subcriteriaDesc(type='text', placeholder='Description', name='criteria[#{i}][subcriteria][#{n}][description]', disabled, value= subcrit.description)
													input.k-textbox.subcriteriaScore(type='number', min='0', required='true', placeholder='Score', name='criteria[#{i}][subcriteria][#{n}][score]', disabled, value= subcrit.score)
													input.assessCriteria.k-button(type='number', min='0')

			tr
				td
					input(class='k-button', type='submit', value='Save')
				td

	script

		$('.assessCriteria').live('click' ,function(e) {

			var areWeInSubcriteria = $(this).parent().hasClass('subcriteria');

			if(areWeInSubcriteria) {

			} else {

			}

		});
